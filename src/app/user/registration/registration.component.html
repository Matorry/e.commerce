<form *ngIf="stateRegister === 'loaded'" [formGroup]="registerForm" aria-label="userRegister"
  (submit)="handleRegister()">
  <h2 for="userRegister">Register</h2>

  <mat-form-field appearance="fill">
    <mat-label>User name:</mat-label>
    <input matInput type="text" name="userName" formControlName="userName">
    <div *ngIf="registerForm.get('userName')?.invalid && registerForm.get('userName')?.touched">
      <mat-error *ngIf="registerForm.get('userName')?.errors!['required']">The user name is required</mat-error>
    </div>
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>First name:</mat-label>
    <input matInput type="text" name="firstName" formControlName="firstName">
    <div *ngIf="registerForm.get('firstName')?.invalid && registerForm.get('firstName')?.touched">
      <mat-error *ngIf="registerForm.get('firstName')?.errors!['required']">The first name is required</mat-error>
    </div>
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>Last name:</mat-label>
    <input matInput type="text" name="lastName" formControlName="lastName">
    <div *ngIf="registerForm.get('lastName')?.invalid && registerForm.get('lastName')?.touched">
      <mat-error *ngIf="registerForm.get('lastName')?.errors!['required']">The last name is required</mat-error>
    </div>
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>Email:</mat-label>
    <input matInput type="email" name="email" formControlName="email">
    <div *ngIf="registerForm.get('email')?.invalid && registerForm.get('email')?.touched">
      <mat-error *ngIf="registerForm.get('email')?.errors!['required']">The email is required</mat-error>
      <mat-error *ngIf="registerForm.get('email')?.errors!['email']">Insert correct email</mat-error>
    </div>
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>Password:</mat-label>
    <input matInput type="password" name="password" formControlName="password">
    <div *ngIf="registerForm.get('password')?.invalid && registerForm.get('password')?.touched">
      <mat-error *ngIf="registerForm.get('password')?.errors!['required']">The password is required</mat-error>
    </div>
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>Address street:</mat-label>
    <input matInput type="text" name="addressStreet" formControlName="addressStreet">
    <div *ngIf="registerForm.get('addressStreet')?.invalid && registerForm.get('addressStreet')?.touched">
      <mat-error *ngIf="registerForm.get('addressStreet')?.errors!['required']">The address street is
        required</mat-error>
    </div>
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>Postal code:</mat-label>
    <input matInput type="text" name="postalCode" formControlName="postalCode">
    <div *ngIf="registerForm.get('postalCode')?.invalid && registerForm.get('postalCode')?.touched">
      <mat-error *ngIf="registerForm.get('postalCode')?.errors!['required']">The postal code is required</mat-error>
    </div>
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>City:</mat-label>
    <input matInput type="text" name="city" formControlName="city">
    <div *ngIf="registerForm.get('city')?.invalid && registerForm.get('city')?.touched">
      <mat-error *ngIf="registerForm.get('city')?.errors!['required']">The city is required</mat-error>
    </div>
  </mat-form-field>

  <button type="submit" [disabled]="registerForm.invalid">Submit</button>
  <span *ngIf="errorMessage">{{ errorMessage }}</span>
</form>
<mat-spinner *ngIf="stateRegister === 'loading'"></mat-spinner>
